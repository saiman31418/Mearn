(this.webpackJsonppractice=this.webpackJsonppractice||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var c=t(1),r=t(15),o=t.n(r),a=(t(6),t(3)),u=t(0),i=function(e){var n=e.handlename,t=e.handlenumber,c=e.addNote,r=e.newName,o=e.focusName,a=e.Phonenumber;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"add a new contact"}),Object(u.jsxs)("form",{onSubmit:c,children:[Object(u.jsxs)("div",{children:["name:",Object(u.jsx)("input",{value:r,onChange:n,required:!0,autoComplete:"off",ref:o}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:a,onChange:t,required:!0,autoComplete:"off"})]})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})]})},s=t(4),d=t.n(s),l="http://localhost:3001/api/persons",f=function(){return d.a.get(l).then((function(e){return e.data}))},b=function(e,n){return d.a.post(l,{name:e,number:n}).then((function(e){return e.data})).catch()},j=function(e){return d.a.delete("".concat(l,"/").concat(e))},h=function(e,n){return d.a.put("".concat(l,"/").concat(e),n).then((function(e){return e.data}))},m=function(){var e=Object(c.useState)([]),n=Object(a.a)(e,2),t=n[0],r=n[1],o=Object(c.useState)(""),s=Object(a.a)(o,2),d=s[0],l=s[1],m=Object(c.useState)(""),O=Object(a.a)(m,2),p=O[0],v=O[1],x=Object(c.useState)(""),g=Object(a.a)(x,2),w=g[0],y=g[1],C=Object(c.useState)(null),N=Object(a.a)(C,2),S=N[0],k=N[1],T=Object(c.useState)(""),D=Object(a.a)(T,2),E=D[0],q=D[1],I=Object(c.useRef)();Object(c.useEffect)((function(){f().then(r),console.log(t)}),[]);var J=function(e){var n=e.message,t=e.type,r=e.setMessage,o=e.setType;return Object(c.useEffect)((function(){if(n){var e=setTimeout((function(){r(null),o("")}),5e3);return function(){return clearTimeout(e)}}}),[n]),n?Object(u.jsx)("div",{className:t,children:n}):null};return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"phonebook"}),Object(u.jsx)(J,{message:S,type:E,setMessage:k,setType:q}),Object(u.jsxs)("div",{children:["Search by name:",Object(u.jsx)("input",{value:w,onChange:function(e){return y(e.target.value)}})]}),Object(u.jsx)(i,{addNote:function(e){e.preventDefault();var n=t.find((function(e){return e.name===d}));n?window.confirm("".concat(d," is already added to phonebook, replace the old number with a new one?"))&&h(n.id,{number:p,name:d}).then((function(e){r(t.map((function(n){return n.id===e.id?e:n}))),k("Updated ".concat(d,"'s number")),q("info"),l(""),v(""),I.current.focus()})).catch((function(e){"TypeError"===e.name?(k("Information of ".concat(d," has already been deleted")),console.log(t),r(t.filter((function(e){return e.id!==n.id})))):k(e.response.data.error),q("error")})):b(d,p).then((function(e){r(t.concat(e)),k("Added ".concat(d)),q("info"),l(""),v(""),console.log(t)})).catch((function(e){console.warn(e.response.data.error),k(e.response.data.error),q("error")}))},newName:d,handlename:function(e){console.log(e.target.value),l(e.target.value)},handlenumber:function(e){console.log(e.target.value),v(e.target.value)},focusName:I,Phonenumber:p}),Object(u.jsx)("h1",{children:"Numbers"}),t.filter((function(e){return e.name.toLowerCase().includes(w.toLowerCase())})).map((function(e){return Object(u.jsxs)("li",{children:[e.name," ",e.number," \xa0",Object(u.jsx)("button",{onClick:function(){return n=e.id,c=e.name,void(window.confirm("Delete ".concat(c,"?"))&&j(n).then((function(){r(t.filter((function(e){return e.id!==n}))),k("Deleted ".concat(c)),q("info")})));var n,c},children:"Delete"})]},e.id)}))]})};o.a.render(Object(u.jsx)("div",{children:Object(u.jsx)(m,{})}),document.getElementById("root"))},6:function(e,n,t){}},[[39,1,2]]]);
//# sourceMappingURL=main.79649143.chunk.js.map